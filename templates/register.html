<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>注册</title>
	<link rel="stylesheet" class="ui" href="/static/css/semantic/dist/semantic.css"/>
	<link rel="stylesheet" class="ui" href="/static/css/body.css"/>
    <link rel="stylesheet" class="ui" href="/static/css/chat.css"/>
	<script type="text/javascript">
	
		function vaildateForm() {
			var username = document.forms["registerForm"]["username"].value;
			var password = document.forms["registerForm"]["password"].value;
            var password2 = document.forms["registerForm"]["password2"].value;
			if (username == null || username == ""){
				alert("用户名不能为空");
				return false;
			}
			var reg_filter=/^s*[.A-Za-z0-9_-]{4,20}s*$/;
			if (!reg_filter.test(username)){
				alert("Invalid username! You can use（A-Z a-z 0-9 _ - .)the length of the password should between 4 and 20 with no space");
				return false;
			}
			if (password == null || password == ""){
				alert("password can't be space");
				return false;
			}
			if (!reg_filter.test(password)){
				alert("Invalid password! You can use（A-Z a-z 0-9 _ - .)the length of the password should between 4 and 20 with no space");
				return false;	
			}
            if (password2 == null || password2 == ""){
                alert("repeated password can't be space!");
                return false;
            }
            if (password != password2){
				alert("please enter the same password!");
				return false;
            }
			return true;
		}
        function reset() {
			$('#username').val('');
			$('#password').val('');
			$('#password2').val('');
		}
	</script>
</head>

<body >
	<body class="Grid">
	<div class="ui fixed transparent inverted main menu">
		<div class="container">
			<div class="title item">
				<b>WebChat</b> 在线聊天系统
			</div>
	
			<div class="right menu">
				<div class="title item">
					<b>
					<a  href="/login" title="返回登录">
						返回登录
					</a>
					</b>
				</div>
			</div>
	
		</div>
	</div>
	{%if not Error%}
	 <div id="wrapper" style="display: block; z-index: 998;">
		<div class="container">
			<div id="login" class="ui two column relaxed grid">
				<div class="column">
					<div class="ui fluid form segment">
						<h3 class="ui header">注册</h3>
							<form name="registerForm"  action="" onsubmit="return vaildateForm();
							"onreset="reset()" method="post">
								<div class="field">
									<label>用户名</label>
									<input name="username" id="username" placeholder="用户名" type="text">
								</div>
								<div class="field">
									<label>密码</label>
									<input name="password" id="password" type="password">
								</div>
								<div class="field">
									<label>重复密码</label>
									<input name="password2" id="password2" type="password">
								</div>
								<input type="submit" value="提交" id="submit" class="ui login_submit green button">
								&nbsp &nbsp &nbsp
								<input type="reset"  value="重置" id="reset" class="ui login_submit button">
								&nbsp &nbsp &nbsp
								<a href="/login" class="ui login_submit button">登陆</a>
							  </form>
					</div>
				</div>
			</div>
		</div>
	</div>
	{%else%}
	 <div id="wrapper" style="display: block; z-index: 998;">
		<div class="container">
			<div id="login" class="ui two column relaxed grid">
				<div class="column">
					<div class="ui fluid form segment">
						<h3 class="ui header" color="red" style="color: red;">注册失败</h3>
							<h3><b>用户名重复</b></h3>
							<a href='/register'> 重新注册 </a>
					</div>
				</div>
			</div>
		</div>
	 </div>
	{%end%}
	</body>
</html>